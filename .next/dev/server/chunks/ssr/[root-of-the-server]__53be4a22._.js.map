{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanleycruz/Downloads/CPS714-Section3/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, type SupabaseClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL as string;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY as string;\n\nlet client: SupabaseClient | null = null;\n\nexport function assertSupabaseConfigured() {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\n      \"Supabase is not configured. Add NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY to your .env.local.\"\n    );\n  }\n}\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!client) {\n    assertSupabaseConfigured();\n    client = createClient(supabaseUrl, supabaseAnonKey);\n  }\n  return client;\n}\n\n\n\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN,IAAI,SAAgC;AAE7B,SAAS;IACd;;AAKF;AAEO,SAAS;IACd,IAAI,CAAC,QAAQ;QACX;QACA,SAAS,IAAA,0OAAY,EAAC,aAAa;IACrC;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanleycruz/Downloads/CPS714-Section3/lib/onboarding.ts"],"sourcesContent":["import type { SupabaseClient, User, UserMetadata } from \"@supabase/supabase-js\";\n\nexport type OnboardingFormData = {\n  fullName?: string;\n  address?: string;\n  contactNumber?: string;\n  emergencyContact?: string;\n  goals?: string[];\n  tier?: string;\n};\n\ntype EnsureArgs = {\n  supabase: SupabaseClient;\n  user: User;\n  formData?: OnboardingFormData;\n};\n\nfunction normalizeMetadata(\n  userMetadata: UserMetadata,\n  formData?: OnboardingFormData\n) {\n  const metaGoals = Array.isArray(userMetadata?.goals)\n    ? (userMetadata.goals as string[])\n    : undefined;\n\n  return {\n    full_name: formData?.fullName ?? (userMetadata?.full_name as string | undefined) ?? \"\",\n    address: formData?.address ?? (userMetadata?.address as string | undefined) ?? \"\",\n    contact_number:\n      formData?.contactNumber ??\n      (userMetadata?.contact_number as string | undefined) ??\n      \"\",\n    emergency_contact:\n      formData?.emergencyContact ??\n      (userMetadata?.emergency_contact as string | undefined) ??\n      \"\",\n    goals: formData?.goals ?? metaGoals ?? [],\n    membership_tier:\n      formData?.tier ??\n      (userMetadata?.membership_tier as string | undefined) ??\n      \"\",\n  };\n}\n\nexport async function ensureProfileAndMembership({\n  supabase,\n  user,\n  formData,\n}: EnsureArgs) {\n  const { full_name, address, contact_number, emergency_contact, goals, membership_tier } =\n    normalizeMetadata(user.user_metadata, formData);\n\n  // Guard against missing tier (we'll still create profile without membership)\n  const tier = membership_tier?.toLowerCase();\n\n  // Ensure profile exists\n  const { data: existingProfile, error: profileCheckError } = await supabase\n    .from(\"profiles\")\n    .select(\"id\")\n    .eq(\"id\", user.id)\n    .maybeSingle();\n\n  if (profileCheckError && profileCheckError.code !== \"PGRST116\") {\n    throw profileCheckError;\n  }\n\n  if (!existingProfile) {\n    const { error: profileInsertError } = await supabase.from(\"profiles\").insert({\n      id: user.id,\n      full_name: full_name || user.email,\n      address,\n      contact_number,\n      emergency_contact,\n      goals: goals ?? [],\n    });\n\n    if (profileInsertError) {\n      throw profileInsertError;\n    }\n  }\n\n  if (tier) {\n    const { data: existingMembership, error: membershipCheckError } = await supabase\n      .from(\"memberships\")\n      .select(\"id\")\n      .eq(\"user_id\", user.id)\n      .maybeSingle();\n\n    if (membershipCheckError && membershipCheckError.code !== \"PGRST116\") {\n      throw membershipCheckError;\n    }\n\n    if (!existingMembership) {\n      const { error: membershipInsertError } = await supabase.from(\"memberships\").insert({\n        user_id: user.id,\n        tier,\n        status: \"active\",\n      });\n\n      if (membershipInsertError) {\n        throw membershipInsertError;\n      }\n    }\n  }\n}\n\n\n\n"],"names":[],"mappings":";;;;AAiBA,SAAS,kBACP,YAA0B,EAC1B,QAA6B;IAE7B,MAAM,YAAY,MAAM,OAAO,CAAC,cAAc,SACzC,aAAa,KAAK,GACnB;IAEJ,OAAO;QACL,WAAW,UAAU,YAAa,cAAc,aAAoC;QACpF,SAAS,UAAU,WAAY,cAAc,WAAkC;QAC/E,gBACE,UAAU,iBACT,cAAc,kBACf;QACF,mBACE,UAAU,oBACT,cAAc,qBACf;QACF,OAAO,UAAU,SAAS,aAAa,EAAE;QACzC,iBACE,UAAU,QACT,cAAc,mBACf;IACJ;AACF;AAEO,eAAe,2BAA2B,EAC/C,QAAQ,EACR,IAAI,EACJ,QAAQ,EACG;IACX,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,iBAAiB,EAAE,KAAK,EAAE,eAAe,EAAE,GACrF,kBAAkB,KAAK,aAAa,EAAE;IAExC,6EAA6E;IAC7E,MAAM,OAAO,iBAAiB;IAE9B,wBAAwB;IACxB,MAAM,EAAE,MAAM,eAAe,EAAE,OAAO,iBAAiB,EAAE,GAAG,MAAM,SAC/D,IAAI,CAAC,YACL,MAAM,CAAC,MACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,WAAW;IAEd,IAAI,qBAAqB,kBAAkB,IAAI,KAAK,YAAY;QAC9D,MAAM;IACR;IAEA,IAAI,CAAC,iBAAiB;QACpB,MAAM,EAAE,OAAO,kBAAkB,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC;YAC3E,IAAI,KAAK,EAAE;YACX,WAAW,aAAa,KAAK,KAAK;YAClC;YACA;YACA;YACA,OAAO,SAAS,EAAE;QACpB;QAEA,IAAI,oBAAoB;YACtB,MAAM;QACR;IACF;IAEA,IAAI,MAAM;QACR,MAAM,EAAE,MAAM,kBAAkB,EAAE,OAAO,oBAAoB,EAAE,GAAG,MAAM,SACrE,IAAI,CAAC,eACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,WAAW;QAEd,IAAI,wBAAwB,qBAAqB,IAAI,KAAK,YAAY;YACpE,MAAM;QACR;QAEA,IAAI,CAAC,oBAAoB;YACvB,MAAM,EAAE,OAAO,qBAAqB,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,eAAe,MAAM,CAAC;gBACjF,SAAS,KAAK,EAAE;gBAChB;gBACA,QAAQ;YACV;YAEA,IAAI,uBAAuB;gBACzB,MAAM;YACR;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanleycruz/Downloads/CPS714-Section3/app/login/page.tsx"],"sourcesContent":["\"use client\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { useRouter } from \"next/navigation\";\nimport { getSupabaseClient, assertSupabaseConfigured } from \"@/lib/supabaseClient\";\nimport { ensureProfileAndMembership } from \"@/lib/onboarding\";\n\nexport default function LoginPage() {\n  const [showPassword, setShowPassword] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const router = useRouter();\n\n  return (\n    <main className=\"relative min-h-screen text-white overflow-hidden\">\n      {/* üè† Back to Home Button */}\n      <Link\n        href=\"/\"\n        className=\"absolute top-6 left-6 flex items-center gap-2 text-yellow-300 hover:text-yellow-200 transition-all z-20\"\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          strokeWidth={2}\n          stroke=\"currentColor\"\n          className=\"w-5 h-5\"\n        >\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.75 19.5L8.25 12l7.5-7.5\" />\n        </svg>\n        <span className=\"font-medium\">Back to Home</span>\n      </Link>\n\n      {/* background video */}\n      <video\n        autoPlay\n        muted\n        loop\n        playsInline\n        className=\"absolute inset-0 w-full h-full object-cover\"\n      >\n        <source src=\"/videos/login-luxury.mp4\" type=\"video/mp4\" />\n      </video>\n\n      {/* dark overlay */}\n      <div className=\"absolute inset-0 bg-black/70 backdrop-blur-[2px]\" />\n\n      {/* content */}\n      <div className=\"relative z-10 flex flex-col items-center justify-center min-h-screen px-6\">\n        <motion.div\n          initial={{ opacity: 0, y: 40 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.8 }}\n          className=\"w-full max-w-md bg-white/10 border border-white/10 backdrop-blur-2xl rounded-2xl shadow-2xl p-10\"\n        >\n          {/* logo */}\n          <div className=\"flex justify-center mb-6 relative\">\n            <div className=\"absolute w-[140px] h-[140px] bg-yellow-400/10 blur-3xl rounded-full animate-pulse\" />\n            <Image\n              src=\"/images/fithub-logo.png\"\n              alt=\"FitHub Logo\"\n              width={100}\n              height={100}\n              priority\n              className=\"relative object-contain mix-blend-screen bg-transparent drop-shadow-[0_0_25px_rgba(212,175,55,0.4)]\"\n            />\n          </div>\n\n          <h1 className=\"text-3xl font-bold text-center mb-2\">\n            Welcome Back to <span className=\"text-[#D4AF37]\">FitHub</span>\n          </h1>\n          <p className=\"text-gray-300 text-center mb-8\">\n            Sign in to continue your fitness journey.\n          </p>\n\n          {/* form */}\n          <form\n            className=\"space-y-5\"\n            onSubmit={async (e) => {\n              e.preventDefault();\n              setError(null);\n              setLoading(true);\n              try {\n                assertSupabaseConfigured();\n                const supabase = getSupabaseClient();\n                const { data, error: signInError } = await supabase.auth.signInWithPassword({\n                  email,\n                  password,\n                });\n                if (signInError) {\n                  setError(signInError.message);\n                  return;\n                }\n                const user = data.user;\n                if (!user) {\n                  setError(\"Login succeeded, but user info was not returned.\");\n                  return;\n                }\n\n                await ensureProfileAndMembership({ supabase, user });\n                router.push(\"/dashboard\");\n                return;\n              } catch (err: any) {\n                setError(err?.message ?? \"Failed to login\");\n              } finally {\n                setLoading(false);\n              }\n            }}\n          >\n            <div>\n              <label className=\"block text-sm text-gray-300 mb-1\">Email</label>\n              <input\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full rounded-lg bg-[#0F1424] border border-white/10 px-4 py-3 outline-none focus:border-[#D4AF37]/70\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-gray-300 mb-1\">Password</label>\n              <div className=\"relative\">\n                <input\n                  type={showPassword ? \"text\" : \"password\"}\n                  placeholder=\"Enter your password\"\n                  required\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full rounded-lg bg-[#0F1424] border border-white/10 px-4 py-3 pr-12 outline-none focus:border-[#D4AF37]/70\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-[#D4AF37]\"\n                >\n                  {showPassword ? \"üëÅÔ∏è\" : \"üôà\"}\n                </button>\n              </div>\n            </div>\n\n            {error && (\n              <p className=\"text-sm text-red-400\">{error}</p>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full mt-4 rounded-lg bg-gradient-to-r from-yellow-500 to-yellow-300 text-black font-semibold px-4 py-3 shadow-xl hover:shadow-yellow-400/40 transition-all disabled:opacity-60\"\n            >\n              {loading ? \"Signing in...\" : \"Login\"}\n            </button>\n          </form>\n\n          <div className=\"text-center mt-6 text-sm text-gray-400\">\n            Don‚Äôt have an account?{\" \"}\n            <Link\n              href=\"/register\"\n              className=\"text-[#D4AF37] hover:underline font-medium\"\n            >\n              Create one\n            </Link>\n          </div>\n        </motion.div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}