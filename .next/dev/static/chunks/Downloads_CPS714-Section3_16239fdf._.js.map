{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanleycruz/Downloads/CPS714-Section3/lib/supabaseClient.ts"],"sourcesContent":["import { createClient, type SupabaseClient } from \"@supabase/supabase-js\";\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL as string;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY as string;\n\nlet client: SupabaseClient | null = null;\n\nexport function assertSupabaseConfigured() {\n  if (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\n      \"Supabase is not configured. Add NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY to your .env.local.\"\n    );\n  }\n}\n\nexport function getSupabaseClient(): SupabaseClient {\n  if (!client) {\n    assertSupabaseConfigured();\n    client = createClient(supabaseUrl, supabaseAnonKey);\n  }\n  return client;\n}\n\n\n\n"],"names":[],"mappings":";;;;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEN,IAAI,SAAgC;AAE7B,SAAS;IACd;;AAKF;AAEO,SAAS;IACd,IAAI,CAAC,QAAQ;QACX;QACA,SAAS,IAAA,6OAAY,EAAC,aAAa;IACrC;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/stanleycruz/Downloads/CPS714-Section3/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { getSupabaseClient } from \"@/lib/supabaseClient\";\n\ntype ProfileRow = {\n  full_name: string | null;\n  address: string | null;\n  contact_number: string | null;\n  emergency_contact: string | null;\n  goals: string[] | null;\n  created_at: string | null;\n};\n\ntype MembershipRow = {\n  tier: string;\n  status: string;\n  current_period_start: string | null;\n  current_period_end: string | null;\n  created_at: string | null;\n};\n\nexport default function DashboardPage() {\n  const supabase = getSupabaseClient();\n  const router = useRouter();\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [profile, setProfile] = useState<ProfileRow | null>(null);\n  const [membership, setMembership] = useState<MembershipRow | null>(null);\n  const [userEmail, setUserEmail] = useState<string>(\"\");\n\n  useEffect(() => {\n    let isMounted = true;\n    async function load() {\n      try {\n        const { data: sessionResult } = await supabase.auth.getSession();\n        const session = sessionResult.session;\n        if (!session) {\n          router.replace(\"/login\");\n          return;\n        }\n        if (!isMounted) return;\n\n        setUserEmail(session.user.email ?? \"\");\n\n        const { data: profileRow, error: profileError } = await supabase\n          .from(\"profiles\")\n          .select(\"full_name,address,contact_number,emergency_contact,goals,created_at\")\n          .eq(\"id\", session.user.id)\n          .maybeSingle();\n\n        if (profileError && profileError.code !== \"PGRST116\") {\n          throw profileError;\n        }\n\n        const { data: membershipRow, error: membershipError } = await supabase\n          .from(\"memberships\")\n          .select(\"tier,status,current_period_start,current_period_end,created_at\")\n          .eq(\"user_id\", session.user.id)\n          .maybeSingle();\n\n        if (membershipError && membershipError.code !== \"PGRST116\") {\n          throw membershipError;\n        }\n\n        if (!isMounted) return;\n        setProfile(profileRow ?? null);\n        setMembership(membershipRow ?? null);\n      } catch (err: any) {\n        if (!isMounted) return;\n        setError(err?.message ?? \"Failed to load dashboard.\");\n      } finally {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    }\n    load();\n    return () => {\n      isMounted = false;\n    };\n  }, [router, supabase]);\n\n  const handleSignOut = async () => {\n    await supabase.auth.signOut();\n    router.replace(\"/\");\n  };\n\n  const renderGoals = () => {\n    if (!profile?.goals || profile.goals.length === 0) {\n      return <span className=\"text-gray-400\">No goals selected yet.</span>;\n    }\n    return (\n      <ul className=\"flex flex-wrap gap-2\">\n        {profile.goals.map((goal) => (\n          <li\n            key={goal}\n            className=\"rounded-full bg-yellow-500/10 border border-yellow-500/40 text-yellow-200 px-3 py-1 text-xs uppercase tracking-wide\"\n          >\n            {goal}\n          </li>\n        ))}\n      </ul>\n    );\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-br from-[#050B1E] via-[#0A1128] to-[#1B2847] text-white overflow-hidden\">\n      <div className=\"absolute inset-0 opacity-40 bg-[radial-gradient(circle_at_top,_rgba(212,175,55,0.2),_transparent_55%)]\" />\n      <div className=\"relative z-10 max-w-5xl mx-auto px-6 py-16 space-y-10\">\n        <header className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-6\">\n          <div>\n            <h1 className=\"text-4xl font-bold tracking-tight\">\n              Welcome back{profile?.full_name ? `, ${profile.full_name}` : \"\"}!\n            </h1>\n            <p className=\"text-gray-300 mt-2\">\n              You&apos;re signed in as <span className=\"text-yellow-300\">{userEmail}</span>\n            </p>\n          </div>\n          <div className=\"flex gap-3\">\n            <Link\n              href=\"/\"\n              className=\"rounded-full border border-yellow-400/60 px-4 py-2 text-sm text-yellow-200 hover:bg-yellow-400/10 transition\"\n            >\n              Home\n            </Link>\n            <button\n              type=\"button\"\n              onClick={handleSignOut}\n              className=\"rounded-full bg-gradient-to-r from-yellow-500 to-yellow-300 text-black font-semibold px-4 py-2 text-sm shadow-lg hover:shadow-yellow-400/40 transition\"\n            >\n              Sign out\n            </button>\n          </div>\n        </header>\n\n        {loading && (\n          <div className=\"grid place-items-center py-20 text-gray-300\">\n            <div className=\"animate-spin h-10 w-10 border-4 border-yellow-400/40 border-t-transparent rounded-full\" />\n            <p className=\"mt-4\">Preparing your dashboard…</p>\n          </div>\n        )}\n\n        {!loading && error && (\n          <div className=\"rounded-2xl border border-red-500/40 bg-red-500/10 p-6 text-sm text-red-300\">\n            {error}\n          </div>\n        )}\n\n        {!loading && !error && (\n          <div className=\"grid gap-8 md:grid-cols-[2fr,1fr]\">\n            <section className=\"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl p-8 shadow-xl\">\n              <h2 className=\"text-2xl font-semibold text-[#D4AF37] mb-4\">Member Profile</h2>\n              <dl className=\"space-y-4 text-sm text-gray-200\">\n                <div>\n                  <dt className=\"uppercase text-xs tracking-widest text-gray-400\">Full Name</dt>\n                  <dd className=\"text-lg font-medium text-white\">\n                    {profile?.full_name || \"Not provided\"}\n                  </dd>\n                </div>\n                <div>\n                  <dt className=\"uppercase text-xs tracking-widest text-gray-400\">Address</dt>\n                  <dd>{profile?.address || \"Not provided\"}</dd>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <dt className=\"uppercase text-xs tracking-widest text-gray-400\">\n                      Contact Number\n                    </dt>\n                    <dd>{profile?.contact_number || \"Not provided\"}</dd>\n                  </div>\n                  <div>\n                    <dt className=\"uppercase text-xs tracking-widest text-gray-400\">\n                      Emergency Contact\n                    </dt>\n                    <dd>{profile?.emergency_contact || \"Not provided\"}</dd>\n                  </div>\n                </div>\n                <div>\n                  <dt className=\"uppercase text-xs tracking-widest text-gray-400\">\n                    Fitness Goals\n                  </dt>\n                  <dd className=\"mt-2\">{renderGoals()}</dd>\n                </div>\n              </dl>\n            </section>\n\n            <aside className=\"rounded-2xl border border-yellow-500/40 bg-yellow-500/10 backdrop-blur-xl p-8 shadow-xl flex flex-col gap-6\">\n              <div>\n                <h2 className=\"text-2xl font-semibold text-yellow-200\">Membership</h2>\n                <p className=\"text-sm text-yellow-100/80\">Your current plan details</p>\n              </div>\n\n              {membership ? (\n                <div className=\"space-y-4 text-sm text-yellow-100/90\">\n                  <div>\n                    <p className=\"uppercase text-xs tracking-[0.4em] text-yellow-200/70\">\n                      Tier\n                    </p>\n                    <p className=\"text-2xl font-bold text-white\">\n                      {membership.tier.toUpperCase()}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"uppercase text-xs tracking-[0.4em] text-yellow-200/70\">\n                      Status\n                    </p>\n                    <p className=\"text-lg font-semibold capitalize\">{membership.status}</p>\n                  </div>\n                  <div className=\"border-t border-yellow-200/20 pt-4 text-xs space-y-2\">\n                    <p>\n                      <span className=\"font-semibold\">Current period start:</span>{\" \"}\n                      {membership.current_period_start\n                        ? new Date(membership.current_period_start).toLocaleDateString()\n                        : \"—\"}\n                    </p>\n                    <p>\n                      <span className=\"font-semibold\">Current period end:</span>{\" \"}\n                      {membership.current_period_end\n                        ? new Date(membership.current_period_end).toLocaleDateString()\n                        : \"—\"}\n                    </p>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-sm text-yellow-100/70\">\n                  Membership details aren&apos;t configured yet. Once you choose a tier during\n                  onboarding it will appear here.\n                </div>\n              )}\n            </aside>\n          </div>\n        )}\n      </div>\n    </main>\n  );\n}\n\n\n\n"],"names":[],"mappings":"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","debugId":null}}]
}